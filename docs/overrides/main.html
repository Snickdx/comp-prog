{% extends "base.html" %}

{% block extrahead %}
  {{ super() }}
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="{{ base_url }}/manifest.json">
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#3f51b5">
  <meta name="msapplication-TileColor" content="#3f51b5">
  <meta name="msapplication-TileImage" content="{{ base_url }}/assets/images/icon-192.png">
{% endblock %}

{% block content %}
  {{ super() }}
  
  <!-- Service Worker Registration -->
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('{{ base_url }}/sw.js')
        .then(function(registration) {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
          console.log('ServiceWorker registration failed: ', err);
        });
    });
  }
  </script>
{% endblock %}
